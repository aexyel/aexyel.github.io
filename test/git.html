<!DOCTYPE html>

<HTML>

<HEAD>
<TITLE>aexyel - Git</TITLE>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta http-equiv="Content-Language" content="ru" />
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<link rel="stylesheet" type="text/css" href="nav.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
</HEAD>

<BODY>

<div class="navbar">
<h2 class="hidden">На сайте:</h2>
<ul>
  <li><a href="index.html">Главная</a></li>
  <li><a href="git.html">Git</a></li>
  <li><a href="docker.html">Docker</a></li>
</ul>
</div>

<hr />

<h1 id="git">
GIT
</h1>

<ul>
  <li><a href="#gitscm">Git - система управления версиями</a>
  <li><a href="#matiashov">Git. Большой практический выпуск</a>
  <li><a href="#gogogo">Поехали!</a>
</ul>

<h2 id="gitscm">Git - система управления версиями</h2>

<table border="0">

<tr>
<td valign="top" align="right">
Сайт Git :
</td>
<td valign="top">
<a href="https://git-scm.com/">https://git-scm.com/</a>
</td>
</tr>

<tr>
<td valign="top" align="right">
Загрузки :
</td>
<td valign="top">
<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a>
</td>
</tr>

<tr>
<td valign="top" align="right">
Документация :
</td>
<td valign="top">
<a href="https://git-scm.com/doc">https://git-scm.com/doc</a>
</td>
</tr>

<tr>
<td valign="top" align="right">
Описание команд :
</td>
<td valign="top">
<a href="https://git-scm.com/docs">https://git-scm.com/docs</a>
</td>
</tr>

<tr>
<td valign="top" align="right">
Книга Pro Git :
</td>
<td valign="top">
<a href="https://git-scm.com/book/en/v2">https://git-scm.com/book/en/v2</a>
</td>
</tr>

</table>


<small>
<hr>
[<a href="#git">Наверх</a>]
</small>

<h2 id="matiashov">
Артем Матяшов<br>
Git. Большой практический выпуск
</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/SEvR78OhGtw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<br>
[<a href="https://www.youtube.com/watch?v=SEvR78OhGtw">Ссылка</a>]

<h3>Конспект:</h3>

<h4>Настройка</h4>

<pre>
install git

git config --system | --global | --local
/etc/gitconfig
~/.gitconfig
.git/config
user.name "user"
user.email "email"
core.editor
</pre>

<h4>Проект</h4>
<pre>
cd dir
git init

git log [-p]
git status
</pre>

<h4>Файлы проекта</h4>
<pre>
untracked - modofied - staged - committed

git add [files]
git commit -m "message"

git commit -am "message"

.gitignore

git show [hash]

git restore [file]

git diff [--staged]

git mv [file1 file2]

git rm [file]
git rm --cached [file]
</pre>

<h4>Ветвления</h4>
<pre>
git branch -a

HEAD -> master (stable)

git branch newbranch
git checkout newbranch

git checkout -b newbranch
git checkout -b newbranch hash

HEAD -> newbranch (dev)

git branch master
git merge newbranch

git branch -d newbranch
git branch -D newbranch

git checkout hash
detached head

git checkout file
rollback file
=git restore

git reset --hard hash
move head-master-commit
</pre>

<h4>Подключение к серверу</h4>
<pre>
git branch -M main

git remote add origin url
git remote -v

git push [-u] origin main
git push --set-upstream origin master

git clone url
git clone url dir

git fetch [origin]
git merge origin/master
=
git pull origin master

git branch newbranch
git rebase master

git push origin master -f

git tag descr
git tag -a desr -m "message"
git tag

git push origin descr
git push --tags
</pre>

<small>
<hr>
[<a href="#git">Наверх</a>]
</small>

<h2 id="gogogo">Поехали!</h2>

<h3>Вы уже готовы?</h3>
<p>
Перед началом использования git и github стоит посмотреть запись А.Матяшова и прочитать первые главы книги Pro Git.
</p>

<p>
Также нужно зарегистрироваться на сервере github.
</p>

<h3>Тогда начинаем</h3>

<p>
Устанавливаем Git, используя средства своей ОС:
</p>
<pre>
# apt-get install git
# pkg_add git
</pre>

<p>
Настраиваем системные и глобальные параметры.
</p>
<p>
--system - /etc/gitconfig - параметры системы<br>
--global - ~/.gitconfig - параметры пользователя<br>
--local - .git/config - параметры проекта
</p>
<pre>
# git config --system http.proxy http://ip.ad.dr.es:port

$ git config --global user.name "user name"  
$ git config --global user.email user@domain.tld
$ git config --global core.editor mcedit

$ git config --list
</pre>

<p>
Создаём свой проект и выгружаем его на сервер:
</p>
<pre>
$ mkdir myprjdir
$ cd myprjdir
$ echo "# my project description" >> README.md
$ git init
$ git add README.md
$ git commit -m "first commit"
$ git branch -M master
$ git remote add origin https://github.com/myusername/myproject.git
$ git push -u origin master
</pre>

<p>
А ничего не работает!!!
</p>
<pre>
$ git push -u origin master
Username for 'https://github.com':
Password for 'https://myusername@github.com':
remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.
remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ for more information.
fatal: Authentication failed for 'https://github.com/myusername/myproject.git/'
</pre>

<p>
На сайте github нужно сгенерировать токен, который будет использоваться вместо пароля.<br>
Для это переходим по ссылке из сообщения с ошибкой и по 
<a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">инструкции</a>
генерируем токен для использования на своём ПК.
</p>

<p>
Повторяем:
</p>
<pre>
$ git push -u origin master
Username for 'https://github.com': myusername
Password for 'https://myusername@github.com': mytoken
</pre>

<h3>Устали каждый раз вводить имя и пароль?</h3>
<p>
Включаем и настраиваем хранение учётных данных для своих проектов по
<a href="https://www.shellhacks.com/git-config-username-password-store-credentials/">инструкции</a>:

</p>
<pre>
$ git config --global credential.helper store
</pre>

<p>
При следующем выполнении действий clone или push учётные данные будут сохранены в файл ~/.git-credentials в виде:
</p>
<pre>
https://myusername:mytoken@github.com
</pre>

<p>
Чтобы имена и пароли (токены) применялись при работе с определёнными репозиториями:
</p>
<pre>
$ git config --global credential.helper store
$ git config --global credential.github.com.useHttpPath true
</pre>

<p>
Файл ~/.git-credentials при этои имеет вид:
</p>
<pre>
https://myusername:mytoken@github.com/myusername/myproject.git
</pre>


<h3>Работаем!</h3>

<p>
Клонируем проект с сервера:
</p>
<pre>
$ git clone https://github.com/somebody/project.git smbprjdir
$ git checkout prjbranch
</pre>

<p>
После каждого изменения файлов в папке проекта повторяем:
</p>
<pre>
$ git add file
$ git commit -m "message"

$ git commit -am "message"

$ git push
</pre>

<p>
Состояние файлов в проекте можно посмотреть:
</p>
<pre>
$ git status
</pre>

<p>
Если изменения каких-либо локальных файлов или директорий не требуется отслеживать и добавлять в проект,
то их имена и пути можно указать в файле .gitignore
</p><p>
Этот файл нужно добавить в проект.
</p>

<h3>Хочу свой сайт на github'е!</h3>
<p>
В соответствии с 
<a href="https://pages.github.com/">инструкцией</a>
нужно:
<ul>
  <li>создать новый публичный репозиторий, называющийся "username.github.io", где username - ваше имя на GitHub
  <li>склонироовать новый репозиторий на свой ПК
  <li>создать файл index.html
  <li>выполнить add, commit и push
  <li>перейти по ссылке https://username.github.io
</ul>
От публикации в репозиторий до обновления сайта должно пройти некоторое время - 1-2 минуты.
</p>

<small>
<hr>
[<a href="index.html">Главная</a>]
[<a href="#git">Наверх</a>]
</small>

</BODY>

</HTML>
